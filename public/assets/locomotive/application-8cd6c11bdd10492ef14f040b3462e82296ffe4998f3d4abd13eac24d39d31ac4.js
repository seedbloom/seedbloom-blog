(function(){window.Locomotive={mounted_on:window.Locomotive.mounted_on,Views:{Sessions:{},Registrations:{},Passwords:{},CustomFields:{}},Flags:{}}}).call(this),function(){var t;t=Backbone.View,Backbone.View=t.extend({constructor:function(e){return this.options=e||{},t.apply(this,arguments)},replace:function(t){var e;return $(this.el).hide(),t.insertAfter($(this.el)),e=new this.constructor({el:t}),e.render(),this.remove(),e}})}.call(this),function(){String.prototype.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},String.prototype.repeat=function(t){for(var e=0,i="";e<t;e++)i+=this;return i},String.prototype.truncate=function(t){return this.length>t?this.slice(0,t-3)+"...":this},String.prototype.slugify=function(t){void 0===t&&(t="_");var e=new RegExp("[^\\w\\"+t+"]","g"),i=new RegExp("[\\"+t+"]{2,}","g");return this.replace(/\s/g,t).replace(e,"").replace(i,t).toLowerCase()},window.addParameterToURL=function(t,e,i){void 0===i&&(i=document),t=encodeURIComponent(t),e=encodeURIComponent(e);for(var o,n=i.location.search.substr(1).split("&"),r=n.length;r--;)if(o=n[r].split("="),o[0]==t){o[1]=e,n[r]=o.join("=");break}r<0&&(n[n.length]=[t,e].join("=")),i.location.search=n.join("&")},window.addJavascript=function(t,e,i){var o=t.createElement("script");o.type="text/javascript",o.src=e,i&&i.onload&&(o.onload=i.onload,delete i.onload);for(var n in i)o.setAttribute(n,i[n]);t.body.appendChild(o)},window.addStylesheet=function(t,e){var i=t.createElement("link");i.style="text/css",i.href=e,i.media="screen",i.rel="stylesheet",t.head.appendChild(i)},$.ui.dialog.prototype.overlayEl=function(){return this.overlay.$el},window.absolute_url=function(t){return 0==t.indexOf("http")?t:(http=location.protocol,slashes=http.concat("//"),slashes.concat(window.location.host).concat(t))}}(),function(){!function(){window.remote_file_to_base64=function(t,e){var i;return i=new XMLHttpRequest,i.open("GET",t,!0),i.responseType="blob",i.onload=function(){var t,i;return 200===this.status?(t=this.response,i=new window.FileReader,i.readAsDataURL(t),i.onloadend=function(){return e(i.result)}):e(null)},i.onerror=function(){return e(null)},i.send()},window.resize_image=function(t,e,i){var o,n;return null==e?void i(t):(o=new FormData,o.append("image",t),o.append("format",e),n=new XMLHttpRequest,n.open("POST","/locomotive/_image_thumbnail",!0),n.onload=function(){return i(200===this.status?this.response:t)},n.onerror=function(){return i(t)},n.send(o))}}()}.call(this),function(){$(function(){return jQuery.fn.equalize=function(){var t,e;return t=this,e=-1,this.find_max=function(){return $(t).each(function(){var t;return t=$(this).height(),e=Math.max(t,e)})},this.apply_max=function(){return $(t).css({"min-height":e})},this.find_max(),this.apply_max(),this},$("section.main > *").equalize()})}.call(this),function(){Locomotive.notify=function(t,e){var i;return i="danger"===e?"exclamation-triangle":"success"===e?"check":"exclamation-circle",$.notify({message:t,icon:"fa fa-"+i},{type:e,placement:{from:"bottom",align:"right"}})}}.call(this),function(){var t;t=$(".content").size()>0?".content":".wrapper",$(t).size()>0&&NProgress.configure({showSpinner:!1,ease:"ease",speed:500,parent:t})}.call(this),function(){$.rails.safe_confirm=function(t){return prompt(t.question)===t.answer},$.rails.allowAction=function(t){var e,i,o,n;return o=t.data("confirm"),n=t.data("safe-confirm"),e=!1,i=null,!o&&!n||($.rails.fire(t,"confirm")&&(o?e=$.rails.confirm(o):n&&(e=$.rails.safe_confirm(n)),i=$.rails.fire(t,"confirm:complete",[e])),e&&i)},$.rails.ajax=function(t){return _.isArray(t.data)?$.ajax(_.extend(t,{contentType:!1})):$.ajax(t)},$(function(){return $("body").delegate($.rails.formSubmitSelector,"ajax:beforeSend",function(t,e){return e.setRequestHeader("X-Flash",!0)}),$("body").delegate($.rails.formSubmitSelector,"ajax:complete",function(t,e,i){var o,n;if($(this).find("button[type=submit], input[type=submit]").button("reset"),o=e.getResponseHeader("X-Message"))return n="success"===i?"success":"error",Locomotive.notify(decodeURIComponent($.parseJSON(o)),n)}),$("body").delegate($.rails.formSubmitSelector,"ajax:aborted:file",function(){return $.rails.handleRemote($(this)),!1}),$("body").delegate($.rails.formSubmitSelector,"ajax:beforeSend",function(t,e,i){return i.data=new FormData($(this)[0]),$(this).find("input[type=file]").each(function(){return i.data.append($(this).attr("name"),this.files[0])}),!0})})}.call(this),function(){window.Select2Helpers=function(){var t,e;return e=function(e){return{minimumInputLength:1,quietMillis:100,formatNoMatches:e.data("no-matches"),formatSearching:e.data("searching"),formatInputTooShort:e.data("too-short"),ajax:{url:e.data("list-url"),dataType:"json",data:function(t){return{q:t.term,page:t.page}},processResults:function(i){return{results:t(i,e.data("label-method"),e.data("group-by")),pagination:{more:i.length===e.data("per-page")}}}}}},t=function(t,e,i){return _.tap([],function(o){return function(n){return _.each(t,function(t){var r,s;if(null==o.collection||null==o.collection.get(t._id))return t.text=t[e],null!=i?(s=_.result(t,i),r=_.find(n,function(t){return t.text===s}),null==r&&(r={text:s,children:[]},n.push(r)),r.children.push(t)):n.push(t)})}}(this))},{build:function(t,i){var o;return i||(i={}),o=_.extend(e(t),i),t.select2(o)}}}()}.call(this),function(){!function(t){t.commands.strike={exec:function(e,i){return t.commands.formatInline.exec(e,i,"STRIKE")},state:function(e,i){return t.commands.formatInline.state(e,i,"STRIKE",null,null)}}}(wysihtml5),function(t){var e,i;i=function(t){var e,i,o;for(e="<thead><tr>",i=0,o=t;0<=o?i<o:i>o;0<=o?++i:--i)e+="<th><br></th>";return e+"</tr></thead>"},e=function(t,e){var i,o,n,r,s;for(i="<tbody>",o=0,r=e;0<=r?o<r:o>r;0<=r?++o:--o){for(i+="<tr>",n=0,s=t;0<=s?n<s:n>s;0<=s?++n:--n)i+="<td><br></td>";i+="</tr>"}return i+="</tbody>"},t.commands.createTable={exec:function(t,o,n){var r,s,a;return n=_.extend({cols:3,rows:3,class_name:"",head:!0},n),r=parseInt(n.cols,10),a=parseInt(n.rows,10),s="<table class='"+n.class_name+"'>",n.head&&(s+=i(r)),s+=e(r,a),s+="</table>",t.commands.exec("insertHTML",s)},state:function(){return!1}}}(wysihtml5)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.FormView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.namespace=null,i.prototype.events={"submit form":"save","ajax:aborted:required":"show_empty_form_message","keyup input, textarea":"modifying"},i.prototype.render=function(){return this.inputs=[],this.display_active_nav(),this.register_unsaved_content(),this.enable_hover(),this.enable_simple_image_inputs(),this.enable_image_inputs(),this.enable_file_inputs(),this.enable_array_inputs(),this.enable_toggle_inputs(),this.enable_datetime_inputs(),this.enable_text_inputs(),this.enable_rte_inputs(),this.enable_markdown_inputs(),this.enable_tags_inputs(),this.enable_document_picker_inputs(),this.enable_select_inputs(),this.enable_color_inputs(),this},i.prototype.register_unsaved_content=function(){return window.unsaved_content=!1,this.tokens=[PubSub.subscribe("inputs.text_changed",function(t){return function(){return t.modifying()}}(this))]},i.prototype.display_active_nav=function(){var t,e;if(e=document.location.toString(),e.match("#"))return t=e.split("#")[1],this.$(".nav-tabs a[href='#"+t+"']").tab("show")},i.prototype.record_active_tab=function(){var t;if($("form .nav-tabs li.active a").size()>0)return t=$("form .nav-tabs li.active a").attr("href").replace("#",""),this.$("#active_tab").val(t)},i.prototype.change_state=function(){return this.$("form button[type=submit], form input[type=submit]").button("loading")},i.prototype.reset_state=function(){return this.$("form button[type=submit], form input[type=submit]").button("reset")},i.prototype.save=function(){return window.unsaved_content=!1,this.change_state(),this.record_active_tab()},i.prototype.show_empty_form_message=function(){var t;return t=this.$("form").data("blank-required-fields-message"),null!=t&&Locomotive.notify(t,"error"),this.reset_state()},i.prototype.enable_hover=function(){return $(".form-group.input").hover(function(){return $(this).addClass("hovered")},function(){return $(this).removeClass("hovered")})},i.prototype.enable_simple_image_inputs=function(){var t;return t=this,this.$(".input.simple_image").each(function(){var e;return e=new Locomotive.Views.Inputs.SimpleImageView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_image_inputs=function(){var t;return t=this,this.$(".input.image").each(function(){var e;return e=new Locomotive.Views.Inputs.ImageView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_file_inputs=function(){var t;return t=this,this.$(".input.file").each(function(){var e;return e=new Locomotive.Views.Inputs.FileView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_array_inputs=function(){var t;return t=this,this.$(".input.array").each(function(){var e;return e=new Locomotive.Views.Inputs.ArrayView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_toggle_inputs=function(){return this.$(".input.toggle input[type=checkbox]").each(function(){var t;return t=$(this),t.data("label-text",t.is(":checked")?t.data("off-text"):t.data("on-text")),t.bootstrapSwitch({onSwitchChange:function(e,i){return t.data("bootstrap-switch").labelText(i?t.data("off-text"):t.data("on-text"))}})})},i.prototype.enable_datetime_inputs=function(){return this.$(".input.date input[type=text], .input.date-time input[type=text]").each(function(){var t,e;return e=$(this).data("format"),t=moment($(this).attr("value"),e),t.isValid()||(t=null),$(this).removeAttr("value").datetimepicker({locale:window.locale,widgetParent:$(this).parents(".form-wrapper"),format:e,defaultDate:t})})},i.prototype.enable_text_inputs=function(){var t;return t=this,this.$(".input.text").each(function(){var e;return e=new Locomotive.Views.Inputs.TextView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_rte_inputs=function(){var t;return t=this,this.$(".input.rte").each(function(){var e;return e=new Locomotive.Views.Inputs.RteView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_markdown_inputs=function(){var t;return t=this,this.$(".input.markdown").each(function(){var e;return e=new Locomotive.Views.Inputs.MarkdownView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.enable_color_inputs=function(){return this.$(".input.color .input-group").colorpicker({container:!1,align:"right"})},i.prototype.enable_tags_inputs=function(){return this.$(".input.tags input[type=text]").tagsinput()},i.prototype.enable_select_inputs=function(){return this.$(".input.select select:not(.disable-select2)").select2()},i.prototype.enable_document_picker_inputs=function(){var t;return t=this,this.$(".input.document_picker").each(function(){var e;return e=new Locomotive.Views.Inputs.DocumentPickerView({el:$(this)}),e.render(),t.inputs.push(e)})},i.prototype.modifying=function(){return window.unsaved_content=!0},i.prototype.remove=function(){return _.each(this.inputs,function(t){return t.remove()}),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)}),this.$(".input.select select:not(.disable-select2)").select2("destroy"),this.$(".input.tags input[type=text]").tagsinput("destroy"),this.$(".input.color .input-group").colorpicker("destroy")},i.prototype._stop_event=function(t){return t.stopPropagation()&t.preventDefault()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Accounts||(t.Accounts={}),Locomotive.Views.Accounts.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t},e={}.hasOwnProperty;Locomotive.Views.SimpleView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="body",i.prototype.render=function(){return this.render_flash_messages(this.options.flash),null!=this.options.view&&(this.view=new this.options.view(this.options.view_data||{}),this.view.render()),this},i.prototype.render_flash_messages=function(t){return _.each(t,function(t){return Locomotive.notify(t[1],t[0])})},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t},e={}.hasOwnProperty;Locomotive.Views.ApplicationView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="body",i.prototype.events={"click .navigation-app .navigation-trigger":"toggle_sidebar"},i.prototype.initialize=function(){return _.bindAll(this,"toggle_sidebar"),this.header_view=new Locomotive.Views.Shared.HeaderView,this.sidebar_view=new Locomotive.Views.Shared.SidebarView,this.drawer_view=new Locomotive.Views.Shared.DrawerView,this.tokens=[PubSub.subscribe("sidebar.close",this.toggle_sidebar)],window.unsaved_content=!1},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.sidebar_view.render(),this.drawer_view.render(),this.set_max_height(),this.automatic_max_height(),this.register_warning_if_unsaved_content()},i.prototype.toggle_sidebar=function(){return this.sidebar_view.toggle_sidebar()},i.prototype.automatic_max_height=function(){return $(window).on("resize",function(t){return function(){var e;return e=t.set_max_height(),PubSub.publish("application_view.resize",{height:e})}}(this))},i.prototype.set_max_height=function(){var t,e;return e=$(window).height(),t=e-this.header_view.height(),this.$("> .wrapper").height(t),t},i.prototype.register_warning_if_unsaved_content=function(){return $(window).bind("beforeunload",function(){if(window.unsaved_content)return $("meta[name=unsaved-content-warning]").attr("content")})},i.prototype.remove=function(){return i.__super__.remove.call(this),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)})},i}(Locomotive.Views.SimpleView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.DropzoneView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click a.upload":"open_file_browser",dragover:"hover",dragleave:"unhover",dragenter:"_stop_event",drop:"drop_files","change input[type=file]":"drop_files"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments)},i.prototype.hover=function(t){return this._stop_event(t),$(this.el).addClass("hovered")},i.prototype.unhover=function(t){return this._stop_event(t),$(this.el).removeClass("hovered")},i.prototype.show_progress=function(t){return this.$(".progress").removeClass("hide").find("> .progress-bar").width(t+"%")},i.prototype.reset_progress=function(){return setTimeout(function(t){return function(){return t.$(".progress").addClass("hide").find("> .progress-bar").width("0%")}}(this),400)},i.prototype.open_file_browser=function(t){return this._stop_event(t),this.$("form input[type=file]").trigger("click")},i.prototype.drop_files=function(t){var e;return this._stop_event(t),this.unhover(t),e=new FormData,_.each(t.target.files||t.originalEvent.dataTransfer.files,function(t){return e.append("content_assets[][source]",t)}),this.upload_files(e)},i.prototype.upload_files=function(t){return $.ajax(this._ajax_options(t)).always(function(t){return function(){return t.reset_progress()}}(this)).fail(function(t){return function(){return t.$(".instructions").effect("shake")}}(this)).done(function(t){return function(){return console.log("uploaded"),t._refresh()}}(this))},i.prototype._refresh=function(){var t;return t=this.$("a.refresh"),t.data("remote")?t.trigger("click"):t[0].click()},i.prototype._ajax_options=function(t){return{url:$(this.el).data("url"),type:"POST",xhr:function(t){return function(){return t._build_xhr()}}(this),data:t,dataType:"json",cache:!1,contentType:!1,processData:!1}},i.prototype._build_xhr=function(){return _.tap($.ajaxSettings.xhr(),function(t){return function(e){if(e.upload)return e.upload.addEventListener("progress",function(e){return t.show_progress(~~(e.loaded/e.total*100))})}}(this))},i.prototype._stop_event=function(t){return t.stopPropagation(),t.preventDefault(),!0},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.EditImageView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click .apply-btn":"apply","click .resize-btn":"toggle_resize_modal","click .crop-btn":"enable_crop"},i.prototype.initialize=function(){return _.bindAll(this,"change_size","apply_resizing","cancel_resizing","update_cropper_label"),i.__super__.initialize.apply(this,arguments)},i.prototype.render=function(){return this.filename=this.$(".image-container").data("filename"),this.width=parseInt(this.$(".image-container").data("width")),this.height=parseInt(this.$(".image-container").data("height")),this.ratio=this.width/this.height,this.create_cropper(),this.create_resize_popover()},i.prototype.create_cropper=function(){return this.$cropper=this.$(".image-container > img"),this.cropper_enabled=!1,this.set_cropper_height(),this.$cropper.cropper({autoCrop:!1,done:this.update_cropper_label})},i.prototype.create_resize_popover=function(){var t;return this.$link=this.$(".resize-btn"),this.$content=this.$(".resize-form").show(),this.$content.find("input").on("keyup",this.change_size),this.$content.find(".apply-resizing-btn").on("click",this.apply_resizing),this.$content.find(".cancel-resizing-btn").on("click",this.cancel_resizing),t=$(".drawer").size()>0?".drawer":".main",this.$link.popover({container:t,placement:"left",content:this.$content,html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"></div><form><div class="popover-content"></div></form></div>'}),this.$link.data("bs.popover").setContent()},i.prototype.enable_crop=function(){return this.cropper_enabled=!0,this.$cropper.cropper("clear"),this.$cropper.cropper("setDragMode","crop")},i.prototype.toggle_resize_modal=function(){var t;return t=this.resize_modal_opened?"hide":"show",this.$link.popover(t),this.resize_modal_opened=!this.resize_modal_opened},i.prototype.change_size=function(t){var e,i,o;if(e=$(t.target),o=parseInt(e.val().replace(/\D+/,"")),!_.isNaN(o))return e.val(o),"image_resize_form[width]"===e.attr("name")?(i=Math.round(o/this.ratio),this._resize_input_el("height").val(i)):(i=Math.round(o*this.ratio),this._resize_input_el("width").val(i))},i.prototype.apply_resizing=function(t){var e,i,o;if(t.stopPropagation(),t.preventDefault(),o=parseInt(this._resize_input_el("width").val()),i=parseInt(this._resize_input_el("height").val()),!_.isNaN(o)&&!_.isNaN(i))return e=$(t.target).button("loading"),window.resizeImageStep(this.$cropper[0],o,i).then(function(t){return function(n){return t.width=o,t.height=i,t.cropper_enabled=!0,t.$cropper.cropper("replace",n.src),t.set_cropper_height(),e.button("reset"),t.toggle_resize_modal()}}(this))},i.prototype.cancel_resizing=function(t){return t.stopPropagation(),t.preventDefault(),this.toggle_resize_modal()},i.prototype.apply=function(t){var e,i,o,n;if(t.stopPropagation(),t.preventDefault(),this.cropper_enabled)return e=$(t.target).closest(".apply-btn"),n=this.$cropper.cropper("getDataURL")||this.$cropper.attr("src"),i=window.dataURLtoBlob(n),o=new FormData,o.append("xhr",!0),o.append("content_asset[source]",i,this.filename),$.ajax({url:e.data("url"),type:"POST",data:o,processData:!1,contentType:!1,success:function(t){return function(e){return null!=t.options.on_apply_callback&&t.options.on_apply_callback(e),t.options.drawer.close()}}(this)})},i.prototype.set_cropper_height=function(){var t;return t=this.$(".edit-assets-container").height(),this.height<150?this.$(".image-container").css("max-height",2*this.height):this.height<t?this.$(".image-container").css("max-height",this.height):this.$(".image-container").css("max-height","inherit")},i.prototype.update_cropper_label=function(t){var e,i,o,n;return e=this.$(".cropper-dragger"),n=Math.round(t.width),o=Math.round(t.height),i=e.find("> .cropper-label"),0===i.size()&&(i=e.append('<span class="cropper-label"><span>').find("> .cropper-label")),i.html(n+" x "+o)},i.prototype._resize_input_el=function(t){var e;return e="image_resize_form["+t+"]",this.$content.find('input[name="'+e+'"]')},i.prototype.remove=function(){return console.log("[EditView] remove"),this.$cropper.cropper("destroy"),this.$link.popover("destroy"),i.__super__.remove.apply(this,arguments)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.IndexView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.events={"click .header-row a.upload":"open_file_browser","click a.edit":"open_edit_drawer"},i.prototype.initialize=function(){return _.bindAll(this,"set_sidebar_max_height"),this.refresh_url=this.$(".content-assets").data("refresh-url"),this.dropzone=new Locomotive.Views.ContentAssets.DropzoneView({el:this.$(".dropzone")})},i.prototype.render=function(){return this.dropzone.render(),this.automatic_sidebar_max_height(),this.set_sidebar_max_height(),i.__super__.render.apply(this,arguments)},i.prototype.open_edit_drawer=function(t){var e;return t.stopPropagation(),t.preventDefault(),e=$(t.target),window.application_view.drawer_view.open(e.attr("href"),Locomotive.Views.ContentAssets.EditImageView,{on_apply_callback:function(t){return function(){return window.location.href=t.refresh_url}}(this)})},i.prototype.hide_from_drawer=function(t){if(this.options.parent_view&&0===t)return this.options.parent_view.opened.picker=!1},i.prototype.open_file_browser=function(t){return this.dropzone.open_file_browser(t)},i.prototype.automatic_sidebar_max_height=function(){return $(window).on("resize",this.set_sidebar_max_height)},i.prototype.set_sidebar_max_height=function(){return setTimeout(function(t){return function(){var e,i;return e=$(t.el).height(),i=t.$(".content-assets").height(),e>i&&(i=e),console.log(e),$(t.dropzone.el).height(i)}}(this),20)},i.prototype.remove=function(){return $(window).off("resize",this.set_sidebar_max_height),this.dropzone.remove()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentAssets||(t.ContentAssets={}),Locomotive.Views.ContentAssets.PickerView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click a.select":"select","click a.edit":"open_edit_drawer"},i.prototype.ajaxified_elements=[".nav-tabs a",".pagination a",".search-bar form",".asset a.remove","a.refresh"],i.prototype.render=function(){return console.log("[PickerView] rendering"),this.ajaxify(),this.enable_dropzone(),i.__super__.render.apply(this,arguments)},i.prototype.ajaxify=function(){var t,e,i,o,n;for(i=this.ajaxified_elements,o=[],t=0,e=i.length;t<e;t++)n=i[t],o.push($(this.el).on("ajax:success",n,function(t){return function(e,i){return t.$(".updatable").html($(i).find(".updatable").html())}}(this)));return o},i.prototype.unajaxify=function(){var t,e,i,o,n;for(i=this.ajaxified_elements,o=[],t=0,e=i.length;t<e;t++)n=i[t],o.push($(this.el).off("ajax:success",n));return o},i.prototype.select=function(t){var e;return console.log("[PickerView] select"),t.stopPropagation(),t.preventDefault(),e=$(t.target),PubSub.publish("file_picker.select",{parent_view:this.options.parent_view,image:e.data("image"),title:e.attr("title"),url:e.attr("href"),filename:e.attr("href").split(/[\\\/]/).pop()})},i.prototype.open_edit_drawer=function(t){var e;return console.log("[PickerView] open_edit_drawer"),t.stopPropagation(),t.preventDefault(),e=$(t.target),window.application_view.drawer_view.open(e.attr("href"),Locomotive.Views.ContentAssets.EditImageView)},i.prototype.enable_dropzone=function(){return this.dropzone=new Locomotive.Views.ContentAssets.DropzoneView({el:this.$(".dropzone")}).render()},i.prototype.hide_from_drawer=function(t){if(console.log("[PickerView] hide_from_drawer"),this.options.parent_view&&this.options.parent_view.hide_from_picker)return this.options.parent_view.hide_from_picker(t)},i.prototype.remove=function(){return console.log("[PickerView] remove"),this.unajaxify(),this.dropzone.remove(),i.__super__.remove.apply(this,arguments)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.IndexView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.initialize=function(){return this.list_view=new Locomotive.Views.Shared.ListView({el:this.$(".big-list")})},i.prototype.render=function(){return this.list_view.render()},i.prototype.remove=function(){return this.list_view.remove(),i.__super__.remove.call(this)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).ContentEntries||(t.ContentEntries={}),Locomotive.Views.ContentEntries.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).CurrentSite||(t.CurrentSite={}),Locomotive.Views.CurrentSite.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.initialize=function(){return this.attach_events_on_private_access_attribute(),this.display_locale_picker_only_for_seo()},i.prototype.attach_events_on_private_access_attribute=function(){return this.$("#site_private_access").on("switchChange.bootstrapSwitch",function(){var t;return t=$(".locomotive_site_password"),t.toggleClass("hide")})},i.prototype.display_locale_picker_only_for_seo=function(){var t;return t=this.$(".locale-picker-btn-group").css({visibility:"hidden"}),this.$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){return"#seo"===$(e.target).attr("href")?t.css({visibility:""}):t.css({visibility:"hidden"})})},i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).CurrentSiteMetafields||(t.CurrentSiteMetafields={}),Locomotive.Views.CurrentSiteMetafields.IndexView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.CustomFields).SelectOptions||(t.SelectOptions={}),Locomotive.Views.CustomFields.SelectOptions.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.events={"click .buttons .edit":"start_inline_editing","click .editable .apply":"apply_inline_editing","click .editable .cancel":"cancel_inline_editing"},i.prototype.start_inline_editing=function(t){var e,i,o,n;return this._stop_event(t),n=$(t.target).parents(".inner-row"),o=n.find(".editable > span").addClass("hide"),i=o.next("input").removeClass("hide"),e=i.next(".btn").removeClass("hide"),e.next(".btn").removeClass("hide"),i.data("previous",i.val())},i.prototype.apply_inline_editing=function(t){var e,i;return this._stop_event(t),e=$(t.target).closest(".btn").addClass("hide"),e.next(".btn").addClass("hide"),i=e.prev("input").addClass("hide"),i.prev("span").html(i.val()).removeClass("hide")},i.prototype.cancel_inline_editing=function(t){var e,i,o;return this._stop_event(t),i=$(t.target).closest(".btn").addClass("hide"),e=i.prev(".btn").addClass("hide"),o=e.prev("input").addClass("hide"),o.val(o.data("previous")),o.prev("span").html(o.val()).removeClass("hide")},i.prototype.mark_as_destroyed=function(t){var e;if(e=$(t.target).parents(".item").find(".mark-as-destroyed"),e.size()>0)return e.val("1")},i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Dashboard||(t.Dashboard={}),Locomotive.Views.Dashboard.ShowView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.infinite_activity_button="a[data-behavior~=load-more]",i.prototype.events={"ajax:beforeSend  a[data-behavior~=load-more]":"loading_activity_feed","ajax:success     a[data-behavior~=load-more]":"refresh_activity_feed"},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$(".assets img").error(function(){return $(this).parent().html($(this).attr("alt"))})},i.prototype.loading_activity_feed=function(t){return $(t.target).button("loading")},i.prototype.refresh_activity_feed=function(t,e){var i,o,n,r;return i=$(t.target).button("reset"),o=this.$(".activity-feed > li:last-child"),r=$(e),r.find(".activity-feed > li").appendTo(this.$(".activity-feed")),(n=r.find(this.infinite_activity_button)).size()>0?i.replaceWith(n):this.$(this.infinite_activity_button).hide(),$(this.el).parent().animate({scrollTop:o.offset().top+"px"},2e3)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).DevelopersDocumentation||(t.DevelopersDocumentation={}),Locomotive.Views.DevelopersDocumentation.ShowView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i.prototype.render=function(){return i.__super__.render.call(this),hljs.initHighlightingOnLoad()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty
;(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".content-main > .actionbar .content",i.prototype.events=_.extend({},Locomotive.Views.Shared.FormView.prototype.events,{"click .form-group.rte label":"select_editable_text","click .form-group.text label":"select_editable_text"}),i.prototype.initialize=function(){return _.bindAll(this,"highlight_form_group"),this.tokens=[PubSub.subscribe("editable_elements.highlighted_text",this.highlight_form_group)]},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),$("form.edit_page").on("ajax:success",function(t){return function(e,i){return null!=t.need_reload?window.location.reload():t.refresh_inputs($(i))}}(this)),$(".info-row select[name=block]").select2().on("change",function(t){return function(e){return PubSub.publish("editable_elements.block_selected",{name:$(e.target).val()}),t.filter_elements_by($(e.target).val())}}(this)),$(".editable-elements .form-group.input.select select").select2().on("change",function(t){return function(){return t.need_reload=!0}}(this))},i.prototype.select_editable_text=function(t){var e;return e=$(t.target).parents(".form-group").attr("id").replace("editable-text-",""),PubSub.publish("editable_elements.form_group_selected",{element_id:e})},i.prototype.highlight_form_group=function(t,e){var i,o,n,r;return i=$(this.el).find("#editable-text-"+e.element_id),0!==i.size()&&(this.filter_elements_by(""),n=function(){return function(){return i.clearQueue().queue(function(t){return $(this).addClass("highlighted"),t()}).delay(200).queue(function(t){return $(this).removeClass("highlighted").find("input[type=text],textarea").trigger("highlight"),t()})}}(),o=this.$(".scrollable"),r=i.position().top,0===r?o.animate({scrollTop:0},500,"swing",n):r<0||r>o.height()?(r<0&&(r=o.scrollTop()+r),o.animate({scrollTop:r},500,"swing",n)):n())},i.prototype.refresh_inputs=function(t){return this.inputs=_.map(this.inputs,function(){return function(e){var i,o;return null==e.need_refresh?e:(o=$(e.el).attr("id"),i=t.find("#"+o),e.replace(i),e)}}())},i.prototype.filter_elements_by=function(t){return this.$(".editable-elements .form-group.input").each(function(){var e;return e=$(this),""===t||"_unknown"===t&&""===e.data("block")||e.data("block")===t?e.parent().show():e.parent().hide()})},i.prototype.remove=function(){return i.__super__.remove.apply(this,arguments),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)})},i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.IframeView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".preview iframe",i.prototype.startup=!0,i.prototype.initialize=function(){if($(this.el).size()>0)return this.window=$(this.el)[0].contentWindow,$(this.el).load(function(t){return function(e){return t.on_load(e)}}(this))},i.prototype.reload=function(){return $(this.el).attr("src",this.preview_url)},i.prototype.on_load=function(t){var e;return null!=(e=this.edit_view_path(t))&&(this.register_beforeunload(),this.preview_url=this.window.document.location.href,this.startup?this.startup=!1:(History.replaceState({live_editing:!0,url:this.preview_url},"",e),this.options.parent_view.replace_edit_view(e)),this.build_and_render_page_view()),!1},i.prototype.edit_view_path=function(){var t;try{return t=$(this.window.document),t.find("meta[name=locomotive-editable-elements-path]").attr("content")}catch(t){return t,this.reload(),Locomotive.notify($(this.el).data("redirection-error"),"warning"),null}},i.prototype.build_and_render_page_view=function(){return null!=this.page_view&&this.page_view.remove(),this.page_view=new Locomotive.Views.EditableElements.PageView({el:$(this.window.document),parent_view:this,button_labels:{edit:$(this.el).data("edit-label")}}),this.page_view.render(),window.addStylesheet(this.window.document,$(this.el).data("style-path"))},i.prototype.register_beforeunload=function(){return $(this.window).off("beforeunload",this.warn_if_unsaved_content),$(this.window).on("beforeunload",this.warn_if_unsaved_content)},i.prototype.warn_if_unsaved_content=function(){if(window.unsaved_content)return $("meta[name=unsaved-content-warning]").attr("content")},i.prototype.remove=function(){return i.__super__.remove.call(this),null!=this.page_view&&this.page_view.remove(),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)})},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.IndexView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".content-main",i.prototype.events={"click .actionbar .actionbar-trigger":"toggle_preview","click .content-overlay":"close_sidebar"},i.prototype.initialize=function(){var t;return _.bindAll(this,"shrink_preview","close_sidebar"),t=$("body").hasClass("live-editing")?{}:{el:".main"},this.tokens=[PubSub.subscribe("editable_elements.highlighted_text",this.shrink_preview)],this.views=[new Locomotive.Views.EditableElements.EditView(t),new Locomotive.Views.EditableElements.IframeView({parent_view:this})]},i.prototype.render=function(){return i.__super__.render.call(this),_.invoke(this.views,"render")},i.prototype.toggle_preview=function(){return $(this.el).toggleClass("actionbar-closed")},i.prototype.shrink_preview=function(){return $(this.el).removeClass("actionbar-closed")},i.prototype.close_sidebar=function(){return PubSub.publish("sidebar.close")},i.prototype.replace_edit_view=function(t){return this.views[0].remove(),$(this.views[0].el).load(t,function(t){return function(){return(t.views[0]=new Locomotive.Views.EditableElements.EditView).render()}}(this))},i.prototype.remove=function(){return i.__super__.remove.call(this),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)}),_.invoke(this.views,"remove")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.PageView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return _.bindAll(this,"refresh_all","refresh_text","refresh_image","refresh_image_on_remove","scroll_to_block","scroll_to_element"),this.tokens=[PubSub.subscribe("editable_elements.block_selected",this.scroll_to_block),PubSub.subscribe("editable_elements.form_group_selected",this.scroll_to_element),PubSub.subscribe("inputs.text_changed",this.refresh_text,PubSub.subscribe("inputs.image_changed",this.refresh_image,PubSub.subscribe("inputs.image_removed",this.refresh_image_on_remove,PubSub.subscribe("pages.sorted",this.refresh_all))))],this.mounted_on=this.$("meta[name=locomotive-mounted-on]").attr("content"),this.views=[new Locomotive.Views.EditableElements.TextHighLighterView({el:this.$("body"),button_labels:this.options.button_labels})]},i.prototype.render=function(){return _.invoke(this.views,"render")},i.prototype.scroll_to_block=function(t,e){return this._scroll_to(this.$('span.locomotive-block-anchor[data-element-id="'+e.name+'"]'))},i.prototype.scroll_to_element=function(t,e){return this._scroll_to(this.$('span.locomotive-editable-text[data-element-id="'+e.element_id+'"]'))},i.prototype._scroll_to=function(t){return 0!==t.size()&&this.$("body").animate({scrollTop:t.offset().top},500)},i.prototype.each_elements=function(t,e){var i,o;return i=$(t.el).parent(),o=i.find('input[name*="[id]"]').val(),e(this.$("*[data-element-id="+o+"]"),o)},i.prototype.refresh_all=function(){return this.options.parent_view.reload()},i.prototype.refresh_text=function(t,e){return this.each_elements(e.view,function(t){return t.each(function(){return $(this).html(e.content)})})},i.prototype.refresh_image_on_remove=function(t,e){return e.url=$(e.view.el).parent().find('input[name*="[default_source_url]"]').val(),this.refresh_image(t,e)},i.prototype.refresh_image=function(t,e){return this.each_elements(e.view,function(t){return function(i,o){var n,r,s;if(0===i.size()&&(i=t.find_and_reference_images_identified_by_url(e.view.path,o)),0!==i.size())return s=e.view.$(".row").data("resize-format"),n=e.view.$('input[name*="[content]"]').val(),r=e.url||n,window.resize_image(r,s,function(e){return t.replace_images(i,e)})}}(this))},i.prototype.replace_images=function(t,e){return t.each(function(){return"IMG"===this.nodeName?$(this).attr("src",e):$(this).css("background-image","url('"+e+"')")})},i.prototype.find_and_reference_images_identified_by_url=function(t,e){return this.$("*[style*='"+t+"'],img[src*='"+t+"']").attr("data-element-id",e)},i.prototype.remove=function(){return i.__super__.remove.call(this),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)}),_.invoke(this.views,"remove")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).EditableElements||(t.EditableElements={}),Locomotive.Views.EditableElements.TextHighLighterView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"mouseenter .locomotive-editable-text":"show","mouseleave .locomotive-editable-text":"hide","mouseenter .locomotive-highlighter-text":"clear_hiding_timeout","mouseleave .locomotive-highlighter-text":"hide","click      #locomotive-highlighter-actions a":"edit"},i.prototype.initialize=function(){return this.build()},i.prototype.render=function(){return this.adjust_height()},i.prototype.edit=function(t){return t.stopPropagation(),t.preventDefault(),this.hide(),PubSub.publish("editable_elements.highlighted_text",{element_id:this.highlighted_element_id})},i.prototype.build=function(){var t,e;return t='<div id="locomotive-highlighter-actions" class="locomotive-highlighter-text"><a href="#"><i class="locomotive-fa locomotive-fa-pencil"></i>'+this.localize("edit")+"</a></div>",e='<div id="locomotive-highlighter-bar" class="locomotive-highlighter-text"></div>',$(this.el).append(t),$(this.el).append(e),this.$(".locomotive-highlighter-text").hide()},i.prototype.show=function(t){var e,i,o,n;return o=this.$(".locomotive-highlighter-text"),n=this.find_element_offset(t),this.clear_hiding_timeout(),e=o.first().show(),e.offset({top:parseInt(n.top)-32,left:parseInt(n.left)-10}),e.width(n.width).show(),i=o.last().show(),i.offset({top:parseInt(n.top),left:parseInt(n.left)-10}),i.height(n.height).show()},i.prototype.hide=function(){return this.hiding_timeout=setTimeout(function(t){return function(){return t._hide()}}(this),600)},i.prototype._hide=function(){return this.$(".locomotive-highlighter-text").hide()},i.prototype.clear_hiding_timeout=function(){if(null!=this.hiding_timeout)return clearTimeout(this.hiding_timeout)},i.prototype.adjust_height=function(){return this.$(".locomotive-editable-text").each(function(){if(0===$(this).height())return $(this).css("display","block").height()})},i.prototype.find_element_offset=function(t){var e;return e=$(t.target),e.hasClass("locomotive-editable-text")||(e=e.parents(".locomotive-editable-text")),this.highlighted_element_id=e.data("element-id"),_.extend(e.offset(),{height:e.height(),width:e.width()})},i.prototype.localize=function(t){return this.options.button_labels[t]},i.prototype.remove=function(){if(i.__super__.remove.apply(this,arguments),null!=this.hiding_timeout)return clearTimeout(this.hiding_timeout)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.ArrayView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click a.add":"begin_add_item","keypress input[type=text]":"begin_add_item_from_enter","click a.delete":"delete_item"},i.prototype.initialize=function(){return this.$list=this.$(".list"),this.$new_input=this.$(".new-field .input"),this.$new_button=this.$(".new-field a"),this.template_url=this.$new_button.attr("href")},i.prototype.render=function(){return this.make_sortable(),this.make_selectable(),this.hide_if_empty()},i.prototype.make_sortable=function(){return this.$list.sortable({items:"> .item",handle:".draggable",axis:"y",placeholder:"sortable-placeholder",cursor:"move",start:function(t,e){return e.placeholder.html('<div class="inner">&nbsp;</div>')},update:function(t){return function(){return t.$list.find('> .item:not(".hide")').each(function(t){return $(this).find(".position-in-list").val(t)})}}(this)})},i.prototype.make_selectable=function(){if("SELECT"===this.$new_input.prop("tagName"))return null!=this.$new_input.data("list-url")?this.make_remote_selectable():this.make_simple_selectable()},i.prototype.make_remote_selectable=function(){return Select2Helpers.build(this.$new_input),this.$new_input.on("change",function(t){return function(e){return t.begin_add_item(e)}}(this))},i.prototype.make_simple_selectable=function(){return this.$new_input.select2({templateResult:this.format_select_result,templateSelection:this.format_select_result})},i.prototype.format_select_result=function(t){var e;return null==t.id?t.text:(e=$(t.element).data("display"),$("<span>"+(null!=e?e:t.text)+"</span>"))},i.prototype.begin_add_item_from_enter=function(t){if(13===t.keyCode)return this.begin_add_item(t)},i.prototype.begin_add_item=function(t){var e;if(t.stopPropagation(),t.preventDefault(),this.is_unique())return e={},e[this.$new_input.attr("name")]=this.$new_input.val(),$.ajax({url:this.template_url,data:e,success:function(t){return function(e){return t.add_item(e)}}(this)})},i.prototype.add_item=function(t){return this.$list.append(t),this.showEl(this.$list),this.reset_input_field()},i.prototype.delete_item=function(t){var e,i,o;if(o=$(t.target).closest("a"),"#"===o.attr("href"))return i=o.parents(".item"),e=i.find(".mark-as-destroyed"),e.size()>0?(e.val("1"),i.addClass("hide"),this.$list.find("> .item.last-child").removeClass("last-child"),this.$list.find('> .item:not(".hide"):last').addClass("last-child")):i.remove(),this.hide_if_empty()},i.prototype.hide_if_empty=function(){if(0===this.$list.find('> .item:not(".hide")').size()&&(this.hideEl(this.$list),this.$list.hasClass("new-input-disabled")))return $(this.el).find("> .form-wrapper").hide()},i.prototype.is_unique=function(){return-1===_.indexOf(this.get_ids(),this.$new_input.val())},i.prototype.get_ids=function(){return _.map(this.$list.find("> .item"),function(t){return $(t).data("id")})},i.prototype.reset_input_field=function(){return this.$new_input.val(null).trigger("change")},i.prototype.showEl=function(t){return t.removeClass("hide")},i.prototype.hideEl=function(t){return t.addClass("hide")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.DocumentPickerView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.$input=this.$("select"),this.$link=this.$("a.edit")},i.prototype.render=function(){return this.$input.data("label"),Select2Helpers.build(this.$input,{allowClear:!0}),this.$input.data("select2").on("unselect",function(t){return function(){return t.$link.addClass("hide"),setTimeout(function(){return t.$input.select2("close")},1)}}(this)),this.$input.on("change",function(t){return function(){return t.$link.addClass("hide")}}(this))},i.prototype.remove=function(){return this.$input.select2("destroy"),i.__super__.remove.apply(this,arguments)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.FileView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"change input[type=file]":"change_file","click a.choose":"begin_choose_file","click a.change":"begin_change_file","click a.content-assets":"open_content_assets_drawer","click a.cancel":"cancel_new_file","click a.delete":"mark_file_as_deleted"},i.prototype.initialize=function(){return _.bindAll(this,"use_content_asset"),this.$file=this.$("input[type=file]"),this.$remove_file=this.$("input[type=hidden].remove"),this.$remote_url=this.$("input[type=hidden].remote-url"),this.$current_file=this.$(".current-file"),this.$no_file=this.$(".no-file"),this.$new_file=this.$(".new-file"),this.$choose_btn=this.$(".buttons > .choose"),this.$change_btn=this.$(".buttons > .change"),this.$cancel_btn=this.$(".buttons .cancel"),this.$delete_btn=this.$(".buttons .delete"),this.persisted_file=this.$(".row").data("persisted-file"),this.path=$(this.el).data("path"),this.pubsub_token=PubSub.subscribe("file_picker.select",this.use_content_asset)},i.prototype.begin_change_file=function(){return this.$file.click()},i.prototype.begin_choose_file=function(){return this.$file.click()},i.prototype.open_content_assets_drawer=function(t){return t.stopPropagation(),t.preventDefault(),$(t.target).closest(".btn-group").removeClass("open"),window.application_view.drawer_view.open($(t.target).attr("href"),Locomotive.Views.ContentAssets.PickerView,{parent_view:this})},i.prototype.use_content_asset=function(t,e){var i;if(e.parent_view.cid===this.cid)return window.application_view.drawer_view.close(),i=window.absolute_url(e.url),window.remote_file_to_base64(i,function(t){return function(o){return o?(t.update_ui_on_changing_file(e.title),o=o.replace(";base64,",";"+e.filename+";base64,"),t.$remote_url.val(o),e.image?(t.$new_file.html("<img src='"+i+"' /> "+t.$new_file.html()),PubSub.publish("inputs.image_changed",{view:t,url:i})):void 0):Locomotive.notify("Unable to load the asset","error")}}(this))},i.prototype.change_file=function(t){var e,i;if(e=t.target.files?t.target.files[0]:null,i=null!=e?e.name:"New file",this.update_ui_on_changing_file(i),e.type.match("image.*"))return this.image_to_base_64(e,function(t){return function(i){return t.$new_file.html("<img src='"+i+"' /> "+t.$new_file.html()),PubSub.publish("inputs.image_changed",{view:t,url:i,file:e})}}(this))},i.prototype.update_ui_on_changing_file=function(t){return this.$new_file.html(t),this.showEl(this.$new_file)&&this.hideEl(this.$current_file)&&this.hideEl(this.$no_file),this.hideEl(this.$change_btn)&&this.hideEl(this.$delete_btn)&&this.hideEl(this.$choose_btn)&&this.showEl(this.$cancel_btn)},i.prototype.cancel_new_file=function(){return this.hideEl(this.$new_file),this.$remote_url.val(""),this.$file.wrap("<form>").closest("form").get(0).reset(),this.$file.unwrap(),$(this.el).removeClass("mark-as-removed"),this.$remove_file.val("0"),this.hideEl(this.$cancel_btn),this.persisted_file?(this.showEl(this.$current_file),this.showEl(this.$change_btn)&&this.showEl(this.$delete_btn)):(this.showEl(this.$no_file),this.showEl(this.$choose_btn)),PubSub.publish("inputs.image_changed",{view:this})},i.prototype.mark_file_as_deleted=function(){return this.$remove_file.val("1"),$(this.el).addClass("mark-as-removed"),this.hideEl(this.$change_btn)&&this.hideEl(this.$delete_btn)&&this.showEl(this.$cancel_btn),PubSub.publish("inputs.image_removed",{view:this})},i.prototype.image_to_base_64=function(t,e){var i;return i=new FileReader,i.onload=function(t){return e(t.target.result)},i.readAsDataURL(t)},i.prototype.showEl=function(t){return t.removeClass("hide")},i.prototype.hideEl=function(t){return t.addClass("hide")},i.prototype.need_refresh=function(){return!0},i.prototype.remove=function(){return i.__super__.remove.apply(this,arguments),PubSub.unsubscribe(this.pubsub_token)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.ImageView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click *[data-action=delete]":"mark_file_as_deleted","click *[data-action=undo]":"undo","click a.file-browse":"open_content_assets_drawer"},i.prototype.initialize=function(){return _.bindAll(this,"change_file"),this.pubsub_token=PubSub.subscribe("file_picker.select",this.change_file)},i.prototype.render=function(){return this.$spinner=this.$(".file-wrapper .spinner"),this.urls={"default":this.$(".file-wrapper").data("default-url"),current:this.$(".file-wrapper").data("url")},this.initial_state=""===this.urls.current?"no_file":"existing_file",_.isEmpty(this.urls.current)&&(this.urls.current=this.urls["default"]),this.resize_format=this.$(".file-wrapper").data("resize"),this.no_file_label=this.$(".file-wrapper").data("no-file-label")},i.prototype.open_content_assets_drawer=function(t){return t.stopPropagation(),t.preventDefault(),window.application_view.drawer_view.open($(t.target).attr("href"),Locomotive.Views.ContentAssets.PickerView,{parent_view:this})},i.prototype.mark_file_as_deleted=function(){if("existing_file"===this.initial_state)return this.current_filename=this.$(".file-name").html(),this.update_ui(!1,!0,this.urls["default"],this.no_file_label)},i.prototype.undo=function(){return this.update_ui(!0,!1,this.urls.current,this.current_filename||this.no_file_label)},i.prototype.change_file=function(t,e){var i;if(e.parent_view.cid===this.cid)return window.application_view.drawer_view.close(),i=window.absolute_url(e.url),this.set_file_url(i),this.current_filename||(this.current_filename=this.$(".file-name").html()),this.$spinner.show(),this.update_filename(e.filename),window.resize_image(i,this.resize_format,function(t){return function(i){return t.update_ui(!0,!0,i,e.filename),t.$spinner.hide()}}(this))},i.prototype.update_ui=function(t,e,i,o){return t||this.set_file_url(""),e?(this.$("*[data-action=delete]").hide(),this.$("*[data-action=undo]").show()):(this.$("*[data-action=undo]").hide(),"no_file"!==this.initial_state&&this.$("*[data-action=delete]").show()),this.$(".file-image img").attr("src",i),this.update_filename(o)},i.prototype.update_filename=function(t){if(!_.isEmpty(t))return this.$(".file-name").html(t)},i.prototype.set_file_url=function(t){return this.$(".file input[type=text]").val(t)},i.prototype.remove=function(){if(i.__super__.remove.apply(this,arguments),null!=this.pubsub_token)return PubSub.unsubscribe(this.pubsub_token)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.TextView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"change input[type=text]":"content_change","paste input[type=text]":"content_change","keyup input[type=text]":"content_change","highlight input[type=text]":"highlight","change textarea":"content_change","paste textarea":"content_change","keyup textarea":"content_change","highlight textarea":"highlight"},i.prototype.content_change=function(t){return PubSub.publish("inputs.text_changed",{view:this,content:this.text_value($(t.target))}),!0},i.prototype.text_value=function(t){return t.val()},i.prototype.highlight=function(t){return $(t.target).focus()},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t},e={}.hasOwnProperty;Locomotive.Views.Inputs.MarkdownView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events=_.extend({},Locomotive.Views.Inputs.TextView.prototype.events,{"click a[data-markdown-command]":"run_command"}),i.prototype.opened_picker=!1,i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),_.bindAll(this,"insert_file"),this.$textarea=this.$("textarea.markdown"),this.editor=CodeMirror.fromTextArea(this.$textarea[0],{mode:"markdown",tabMode:"indent",lineWrapping:!0}),this.pubsub_token=PubSub.subscribe("file_picker.select",this.insert_file)},i.prototype.run_command=function(t){var e,i;switch(e=$(t.target).closest("a"),i=e.data("markdown-command")){case"bold":this.apply_bold();break;case"italic":this.apply_italic();break;case"insertFile":this.open_file_picker(e.data("url"));break;default:return void console.log("[Markdown input] command not implemented: "+i)}return this.content_change_with_markdown()},i.prototype.apply_bold=function(){var t;return t=this.editor.getSelection(),null!=t&&t.length>0||(t="Some text"),this.editor.replaceSelection("**"+t+"**")},i.prototype.apply_italic=function(){var t;return t=this.editor.getSelection(),null!=t&&t.length>0||(t="Some text"),this.editor.replaceSelection("*"+t+"*")},i.prototype.insert_file=function(t,e){var i;if(e.parent_view.cid===this.cid)return i=this.editor.getSelection(),null!=i&&0!==i.length||(i=e.title),e.image?this.editor.replaceSelection(" !["+i+"]("+e.url+") "):this.editor.replaceSelection(" ["+i+"]("+e.url+") "),this.content_change_with_markdown(),this.hide_file_picker()},i.prototype.content_change_with_markdown=function(){var t;return t=$.Event("change",{target:this.$textarea}),this.content_change(t)},i.prototype.text_value=function(){return kramed(this.editor.getValue())},i.prototype.open_file_picker=function(t){if(!1===this.opened_picker)return window.application_view.drawer_view.open(t,Locomotive.Views.ContentAssets.PickerView,{parent_view:this}),this.opened_picker=!0},i.prototype.hide_file_picker=function(){return window.application_view.drawer_view.close(),this.opened_picker=!1},i.prototype.remove=function(){return PubSub.unsubscribe(this.pubsub_token),i.__super__.remove.apply(this,arguments)},i}(Locomotive.Views.Inputs.TextView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.Inputs).Rte||(t.Rte={}),Locomotive.Views.Inputs.Rte.EditTableView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return _.bindAll(this,"hide"),this.$link=this.$("a[data-wysihtml5-hiddentools=table]"),this.$content=this.$link.next(".table-dialog-content"),this.editor=this.options.editor},i.prototype.render=function(){if(0!==this.$link.size())return this.create_popover(),this.attach_events()},i.prototype.create_popover=function(){return this.$link.popover({placement:"bottom",content:this.$content.html(),html:!0,title:void 0})},i.prototype.attach_events=function(){return this.editor.on("tableunselect:composer",this.hide)},i.prototype.detach_events=function(){return this.editor.stopObserving("tableselect:composer",this.hide)},i.prototype.hide=function(){return this.$link.popover("hide")},i.prototype.remove=function(){return this.$link.popover("destroy"),this.$(".popover").remove()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.Inputs).Rte||(t.Rte={}),Locomotive.Views.Inputs.Rte.FileView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.opened={popover:!1,picker:!1},i.prototype.container={dataset:{showdialogonselection:!0}},i.prototype.initialize=function(){return _.bindAll(this,"change_image","insert_file","hide"),this.$link=this.$("a[data-wysihtml5-command=insertFile]"),this.editor=this.options.editor,this.$popover=this.$link.next(".image-dialog-content"),this.pubsub_token=PubSub.subscribe("file_picker.select",this.insert_file)},i.prototype.render=function(){return this.attach_editor(),this.create_popover()},i.prototype.attach_editor=function(){var t;return t=this.editor.toolbar.commandMapping["insertFile:null"],t.dialog=this},i.prototype.create_popover=function(){return this.$popover.show(),this.$link.popover({container:".main",placement:"left",content:this.$popover,html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"></div><form class="simple_form"><div class="popover-content"></div></form></div>'}),this.$link.data("bs.popover").setContent(),this.attach_popover_events()},i.prototype.attach_popover_events=function(){return this.$popover.parents("form").on("click",".apply",this.change_image),this.$popover.on("click",".apply",this.change_image),this.$popover.on("click",".cancel",this.hide)},i.prototype.detach_popover_events=function(){return this.$popover.parents("form").on("click",".apply",this.change_image),this.$popover.on("click",".apply",this.change_image),this.$popover.on("click",".cancel",this.hide)},i.prototype.change_image=function(){return this.editor.composer.commands.exec("insertImage",{src:this._input_el("src").val(),"class":this._input_el("alignment","select").val(),title:this._input_el("title").val(),alt:this._input_el("alt").val()}),this.hide()},i.prototype.insert_file=function(t,e){var i;if(e.parent_view.cid===this.cid)return e.image?this.editor.composer.commands.exec("insertImage",{src:e.url,title:e.title,alt:e.alt}):(i="<a href='"+e.url+"' title='"+e.title+"'>"+e.title+"</a>",this.editor.composer.commands.exec("insertHTML",i)),this.editor.toolbar._preventInstantFocus(),this.hide()},i.prototype.show=function(t){var e;return this.editor.focus(),!1===t?(this.hide_popover(),this.show_picker()):(e=$(t),this._input_el("src").val(e.attr("src")),this._input_el("alignment","select").val(e.attr("class")),this._input_el("title").val(e.attr("title")),this._input_el("alt").val(e.attr("alt")),this.show_popover())},i.prototype.show_picker=function(){if(!1===this.opened.picker)return window.application_view.drawer_view.open(this.$link.data("url"),Locomotive.Views.ContentAssets.PickerView,{parent_view:this}),this.opened.picker=!0},i.prototype.show_popover=function(){if(!1===this.opened.popover)return this.$link.popover("show"),this.opened.popover=!0},i.prototype.update=function(){},i.prototype.hide=function(){return this.opened.picker?this.hide_picker():this.opened.popover?this.hide_popover():void 0},i.prototype.hide_picker=function(){return window.application_view.drawer_view.close(),this.opened.picker=!1},i.prototype.hide_from_picker=function(t){if(0===t)return this.opened.picker=!1},i.prototype.hide_popover=function(){return this.$link.popover("hide"),this.opened.popover=!1},i.prototype._input_el=function(t,e){var i;return e||(e="input"),i="rte_input_image_form["+t+"]",this.$popover.find(e+'[name="'+i+'"]')},i.prototype.remove=function(){return this.detach_popover_events(),this.$link.popover("destroy"),this.$(".popover").remove(),PubSub.unsubscribe(this.pubsub_token),i.__super__.remove.apply(this,arguments)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.Inputs).Rte||(t.Rte={}),Locomotive.Views.Inputs.Rte.ImageView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){
return i.__super__.initialize.call(this),this.$link=this.$("a[data-wysihtml5-command=insertImage]"),this.$popover=this.$link.next(".image-dialog-content")},i.prototype.attach_editor=function(){var t;return t=this.editor.toolbar.commandMapping["insertImage:null"],t.dialog=this},i}(Locomotive.Views.Inputs.Rte.FileView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.Inputs).Rte||(t.Rte={}),Locomotive.Views.Inputs.Rte.LinkView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.isOpen=!1,i.prototype.container={dataset:{showdialogonselection:!1}},i.prototype.initialize=function(){return _.bindAll(this,"apply","show","hide"),this.$link=this.$("a[data-wysihtml5-command=createLink]"),this.editor=this.options.editor,this.$content=this.$link.next(".link-dialog-content"),this.$content.find(".input.select select:not(.disable-select2)").data("select2").$dropdown.addClass("rte-select2-dropdown")},i.prototype.render=function(){return this.attach_editor(),this.create_popover(),this.attach_events()},i.prototype.create_popover=function(){return this.$content.show(),this.$link.popover({container:this.$link.parents("fieldset"),placement:"right",content:this.$content,html:!0,trigger:"manual",template:'<div class="popover" role="tooltip"><div class="arrow"></div><form class="simple_form"><div class="popover-content"></div></form></div>'}),this.$link.data("bs.popover").setContent()},i.prototype.attach_events=function(){return this.$content.on("click",".apply",this.apply),this.$content.on("click",".cancel",this.hide)},i.prototype.detach_events=function(){return this.$content.off("click",".apply",this.apply),this.$content.off("click",".cancel",this.hide)},i.prototype.attach_editor=function(){var t;return t=this.editor.toolbar.commandMapping["createLink:null"],t.dialog=this},i.prototype.apply=function(){var t;if(t=this._input_el("url").val(),!_.isEmpty(t))return this.editor.composer.commands.exec("createLink",{href:t,target:this._input_el("target","select").val(),title:this._input_el("title").val()}),this.editor.toolbar._preventInstantFocus(),this.hide()},i.prototype.show=function(t){var e;if(!this.isOpen||!1===t)return!1===t?this.$content.parents("form")[0].reset():(e=$(t),this._input_el("url").val(e.attr("href")),this._input_el("target","select").val(e.attr("target")),this._input_el("title").val(e.attr("title"))),this.$link.popover("toggle"),this._input_el("url").focus(),this.isOpen=!0},i.prototype.update=function(){},i.prototype.hide=function(){return this._input_el("target","select").select2("close"),this.$link.popover("hide"),this.isOpen=!1},i.prototype._input_el=function(t,e){var i;return e||(e="input"),i="rte_input_link_form["+t+"]",this.$content.find(e+'[name="'+i+'"]')},i.prototype.remove=function(){return this.detach_events(),this.$link.popover("destroy"),this.$(".popover").remove()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views.Inputs).Rte||(t.Rte={}),Locomotive.Views.Inputs.Rte.TableView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.container={dataset:[]},i.prototype.initialize=function(){return _.bindAll(this,"apply","show","hide","show_link","hide_link"),this.$link=this.$("a[data-wysihtml5-command=createTable]"),this.editor=this.options.editor,this.$content=this.$link.next(".table-dialog-content")},i.prototype.render=function(){if(0!==this.$link.size())return this.create_popover(),this.attach_events(),this.attach_editor()},i.prototype.create_popover=function(){return this.$content.show(),this.$link.popover({container:this.$link.parents("fieldset"),placement:"right",content:this.$content,html:!0,trigger:"manual",template:'<div class="popover" role="tooltip"><div class="arrow"></div><form class="simple_form"><div class="popover-content"></div></form></div>'}),this.$link.data("bs.popover").setContent()},i.prototype.attach_events=function(){return this.$content.on("click",".apply",this.apply),this.$content.on("click",".cancel",this.hide),this.editor.on("tableselect:composer",this.hide_link),this.editor.on("tableunselect:composer",this.show_link)},i.prototype.detach_events=function(){return this.$content.off("click",".apply",this.apply),this.$content.off("click",".cancel",this.hide),this.editor.stopObserving("tableselect:composer",this.hide_link),this.editor.stopObserving("tableunselect:composer",this.show_link)},i.prototype.attach_editor=function(){var t;return t=this.editor.toolbar.commandMapping["createTable:null"],t.dialog=this},i.prototype.apply=function(){return this.editor.composer.commands.exec("createTable",{cols:this._input_el("cols").val(),rows:this._input_el("rows").val(),class_name:this._input_el("class_name").val(),head:this._input_el("head").last().bootstrapSwitch("state")}),this.hide()},i.prototype.show=function(){return this.$link.popover("toggle"),this.$content.parents("form")[0].reset()},i.prototype.update=function(){},i.prototype.hide=function(){return this.$link.popover("hide")},i.prototype.show_link=function(){return this.$link.show()},i.prototype.hide_link=function(){return this.$link.hide()},i.prototype._input_el=function(t,e){var i;return e||(e="input"),i="rte_input_table_form["+t+"]",this.$content.find(e+'[name="'+i+'"]')},i.prototype.remove=function(){return this.detach_events(),this.$link.popover("destroy"),this.$(".popover").remove()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.RteView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events={"click a.style":"open_styles_dialog","click a.table":"open_table_dialog","click a.expand":"expand","highlight textarea":"highlight"},i.prototype.initialize=function(){return _.bindAll(this,"register_editor_events","on_content_change","resize"),this.tokens=[PubSub.subscribe("application_view.resize",this.resize)],this.build_editor()},i.prototype.render=function(){return this.render_views()},i.prototype.build_editor=function(){var t;return t=this.$("textarea"),this.editor=new wysihtml5.Editor(t.attr("id"),{toolbar:"wysihtml5-toolbar-"+t.attr("id"),useLineBreaks:t.data("inline"),parserRules:wysihtml5ParserRules,stylesheets:["/assets/locomotive/wysihtml5_editor-b4f58f3877730b43505cbeda3a6e0ea4cd726201b999e2039660fdb751bcf6f3.css"],showToolbarDialogsOnSelection:!1}),this.editor.on("load",this.register_editor_events)},i.prototype.render_views=function(){return this.editor.on("load",function(t){return function(){return t.views=[t.build_and_render_view(Locomotive.Views.Inputs.Rte.LinkView),t.build_and_render_view(Locomotive.Views.Inputs.Rte.FileView),t.build_and_render_view(Locomotive.Views.Inputs.Rte.ImageView),t.build_and_render_view(Locomotive.Views.Inputs.Rte.TableView),t.build_and_render_view(Locomotive.Views.Inputs.Rte.EditTableView)],console.log("[RTE] all views created and rendered")}}(this))},i.prototype.expand=function(t){return t.stopPropagation(),t.preventDefault(),$(this.el).parents(".simple_form").toggleClass("rte-expanded"),$(this.el).parents(".inputs").toggleClass("expanded"),$(this.el).toggleClass("expanded"),null!=this.$style_popover&&this.$style_popover.popover("hide"),this.resize()},i.prototype.open_styles_dialog=function(t){var e,i;return e=$(t.target).closest("a"),i=e.next(".style-dialog-content").html(),this.$style_popover=this.$style_popover||e.popover({placement:"top",content:i,html:!0,title:void 0}),this.$style_popover.data("bs.popover").options.content=i,this.$style_popover.popover("show")},i.prototype.build_and_render_view=function(t){var e;return e=new t({el:this.el,editor:this.editor}),e.render(),e},i.prototype.register_editor_events=function(){return this.$(".wysihtml5-sandbox").contents().find("body").on("keyup",function(t){return function(){return t.on_content_change()}}(this)),this.$(".wysihtml5-sandbox").contents().find("body").on("dblclick",function(t){return function(){var e;if(e=t.editor.composer.selection.getSelectedNode(),wysihtml5.dom.getParentElement(e,{query:"a"},4))return t.editor.toolbar.commandMapping["createLink:null"].link.click()}}(this)),this.editor.on("change",this.on_content_change),this.editor.on("aftercommand:composer",this.on_content_change),this.editor.on("change_view",this.resize)},i.prototype.on_content_change=function(){return PubSub.publish("inputs.text_changed",{view:this,content:this.editor.getValue()})},i.prototype.highlight=function(){return this.editor.focus()},i.prototype.resize=function(){var t,e,i,o,n,r,s,a,p,u,c,l,h,_,d,f,m;if(e=this.$(".form-wrapper .wysihtml5-sandbox"),n=this.$(".form-wrapper textarea"),i=$(this.el).parents(".inputs"),r=this.$(".form-wrapper"),i.hasClass("expanded")){for(h=[e,n],d=[],p=0,c=h.length;p<c;p++)o=h[p],s=r.outerHeight()-o.outerHeight(),m=$(this.el).height()-(r.outerHeight()-r.height()+parseInt(r.css("margin-top"))+parseInt($(this.el).css("padding-bottom"))),a=m-s,null==o.data("height")&&o.data("height",o.css("height")),d.push(o.css("min-height",a));return d}for(_=[e,n],f=[],u=0,l=_.length;u<l;u++)t=_[u],f.push(t.css("min-height",t.data("height")));return f},i.prototype.remove=function(){return _.invoke(this.views,"remove"),_.each(this.tokens,function(t){return PubSub.unsubscribe(t)}),this.editor.stopObserving("onLoad",this.register_keydown_event),this.editor.stopObserving("onChange",this.on_content_change),this.editor.destroy(),i.__super__.remove.call(this)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Inputs||(t.Inputs={}),Locomotive.Views.Inputs.SimpleImageView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.events=_.extend({},Locomotive.Views.Inputs.ImageView.prototype.events,{"change input[type=file]":"change_file"}),i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$fields={file:this.$("input[type=file]"),remove:this.$("input[type=hidden].remove")}},i.prototype.undo=function(){return this.$fields.file.wrap("<form>").parent("form").trigger("reset"),this.$fields.file.unwrap(),i.__super__.undo.apply(this,arguments)},i.prototype.change_file=function(t){var e;if(null!=(e=t.target.files?t.target.files[0]:null)&&e.type.match("image.*"))return this.current_filename||(this.current_filename=this.$(".file-name").html()),this.$spinner.show(),this.update_filename(e.name),this.image_to_base_64(e,function(t){return function(i){return window.resize_image(i,t.resize_format,function(i){return t.update_ui(!0,!0,i,e.name),t.$spinner.hide()})}}(this))},i.prototype.update_ui=function(t){var e;return e=t?"0":"1",this.$fields.remove.val(e),i.__super__.update_ui.apply(this,arguments)},i.prototype.image_to_base_64=function(t,e){var i;return i=new FileReader,i.onload=function(t){return e(t.target.result)},i.readAsDataURL(t)},i}(Locomotive.Views.Inputs.ImageView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Memberships||(t.Memberships={}),Locomotive.Views.Memberships.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Memberships||(t.Memberships={}),Locomotive.Views.Memberships.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).MyAccount||(t.MyAccount={}),Locomotive.Views.MyAccount.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".public-box",i.prototype.events={"click .api_key.input button":"regenerate_api_key","submit form":"save"},i.prototype.regenerate_api_key=function(t){var e;if(t.stopPropagation(),t.preventDefault(),e=$(t.target),confirm(e.data("confirm")))return $.rails.ajax({url:e.data("url"),type:"put",dataType:"json",success:function(){return function(t){return e.prev("code").html(t.api_key)}}()})},i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.FormView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el="#content",i.prototype.initialize=function(){return this.attach_events_on_redirect_attribute()},i.prototype.attach_events_on_redirect_attribute=function(){return this.$("#page_redirect").on("switchChange.bootstrapSwitch",function(){var t;return t=$(".locomotive_page_redirect_url, .locomotive_page_redirect_type"),t.toggleClass("hide")})},i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Pages.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.ListView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".pages-tree",i.prototype.render=function(){return this.make_foldable(),this.make_sortable(),this.make_hoverable(),this},i.prototype.make_foldable=function(){return this,this.$("ul .fold-unfold").each(function(){var t,e;if(e=$(this),t=e.next("ul.leaves"),e.hasClass("folded"))return t.hide()}).click(function(){var t,e,i;return i=$(this),e=i.parents("li.node"),t=i.next("ul.leaves"),i.hasClass("folded")?t.slideDown("fast",function(){return i.removeClass("folded").addClass("unfolded"),$.cookie(e.attr("id"),"unfolded",{path:window.Locomotive.mounted_on})}):t.slideUp("fast",function(){return i.removeClass("unfolded").addClass("folded"),$.cookie(e.attr("id"),"folded",{path:window.Locomotive.mounted_on})})})},i.prototype.make_sortable=function(){var t;return t=this,this.$("ul").sortable({items:"> li.page",handle:".draggable",axis:"y",placeholder:"sortable-placeholder",cursor:"move",update:function(){return t.call_sort($(this))},stop:function(t,e){var i;if($(this).hasClass("root")&&(0===(i=e.item.index())||i>=$(this).find("> li").size()-2))return $(this).sortable("cancel")}})},i.prototype.make_hoverable=function(){return this.$("a").hover(function(){return $(this).prev("i.icon").addClass("on")},function(){return $(this).prev("i.icon").removeClass("on")})},i.prototype.call_sort=function(t){return $.rails.ajax({url:t.data("url"),type:"post",dataType:"json",data:{children:_.map(t.sortable("toArray"),function(t){return t.replace("node-","")}),_method:"put"},success:this.on_successful_sort,error:this.on_failed_sort})},i.prototype.on_successful_sort=function(t,e,i){return Locomotive.notify(decodeURIComponent($.parseJSON(i.getResponseHeader("X-Message"))),"success"),PubSub.publish("pages.sorted")},i.prototype.on_failed_sort=function(t,e,i){return Locomotive.notify(decodeURIComponent($.parseJSON(i.getResponseHeader("X-Message"))),"error")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Pages||(t.Pages={}),Locomotive.Views.Pages.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Pages.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).PublicSubmissionAccounts||(t.PublicSubmissionAccounts={}),Locomotive.Views.PublicSubmissionAccounts.EditView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Registrations||(t.Registrations={}),Locomotive.Views.Registrations.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".public-box",i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.DrawerView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".content-main > .drawer",i.prototype.delays={fade:50,remove:200},i.prototype.events={"click .close-button":"close"},i.prototype.initialize=function(){return this.stack=[],i.__super__.initialize.apply(this,arguments)},i.prototype.open=function(t,e,i){var o;return null==i&&(i={}),console.log("[DrawerView] open, stack("+this.stack.length+") opened = "+$(this.el).hasClass("drawer-open")+", "+t),o={url:t,view_klass:e,options:i},this.push(o)},i.prototype.close=function(){return console.log("[DrawerView] close, stack("+this.stack.length+")"),this.pop()},i.prototype.push=function(t){return this.hide(this.last_entry()),this.stack.push(t),this.show(t)},i.prototype.pop=function(){var t;return t=this.stack.pop(),this.hide(t,function(t){return function(){return t.show(t.last_entry())}}(this))},i.prototype.replace=function(t){var e,i;return i=this.stack.pop(),e=this.container(!0),this.stack.push(t),null!=t.url?e.load(t.url,function(o){return function(){return i&&i.view.remove(),o._show(t,e)}}(this)):this._show(t,e)},i.prototype.show=function(t){var e;if(null!==t)return e=1===this.stack.length?0:this.delays.fade,setTimeout(function(e){return function(){var i;return i=e.container(),null!=t.url?i.load(t.url,function(){return e._show(t,i)}):e._show(t,i)}}(this),e)},i.prototype.hide=function(t,e){return 0===this.stack.length?$(this.el).removeClass("drawer-open"):null!=t&&t.view.$el.addClass("fadeout"),setTimeout(function(i){return function(){if(null!=t&&(null!=t.view.hide_from_drawer&&t.view.hide_from_drawer(i.stack.length),t.view.remove()),null!=e)return e()}}(this),this.delays.remove)},i.prototype.last_entry=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1]},i.prototype.container=function(t){return null!=t&&t?this.$("> .content-inner").find("> div"):this.$("> .content-inner").html("<div></div>").find("> div")},i.prototype._show=function(t,e){var i,o;return i=t.view_klass,o=_.extend({el:e,drawer:this},t.options),t.view=new i(o),t.view.render(),$(this.el).addClass("drawer-open")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.HeaderView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".header",i.prototype.initialize=function(){},i.prototype.render=function(){},i.prototype.height=function(){return $(this.el).outerHeight(!0)},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.ListItemView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.tagName="li",i.prototype.events={"click a.remove":"remove_item"},i.prototype.template=function(){},i.prototype.render=function(){return $(this.el).html(this.template()(this.model.toJSON())),this},i.prototype.remove_item=function(t){if(t.stopPropagation(),t.preventDefault(),confirm($(t.target).closest("a").data("confirm")))return this.model.destroy()},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.ListView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.initialize=function(){return this.sort_url=$(this.el).data("sort-url")},i.prototype.render=function(){if(null!=this.sort_url)return this.make_sortable()},i.prototype.make_sortable=function(){var t;return t=this,$(this.el).sortable({items:"> .item",handle:".draggable",axis:"y",placeholder:"sortable-placeholder",cursor:"move",start:function(t,e){return e.placeholder.html('<div class="inner">&nbsp;</div>')},update:function(e,i){return t.call_sort(i)}})},i.prototype.call_sort=function(){return $.rails.ajax({url:this.sort_url,type:"post",dataType:"json",data:{entries:_.map($(this.el).find("> .item"),function(t){return $(t).data("id")}),_method:"put"},success:this.on_successful_sort,error:this.on_failed_sort})},i.prototype.on_successful_sort=function(t,e,i){var o;return o=i.getResponseHeader("X-Message"),Locomotive.notify(decodeURIComponent($.parseJSON(o)),"success")},i.prototype.on_failed_sort=function(t,e,i){var o;return o=_.isObject(i)?$.parseJSON(i.getResponseHeader("X-Message")):i,Locomotive.notify(decodeURIComponent(o),"danger")},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Shared||(t.Shared={}),Locomotive.Views.Shared.SidebarView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el="body > .sidebar",i.prototype.initialize=function(){return _.bindAll(this,"close_sidebar_on_mobile"),this.pages_view=new Locomotive.Views.Pages.ListView,this.tokens=[PubSub.subscribe("application_view.resize",this.close_sidebar_on_mobile)]},i.prototype.render=function(){return this.pages_view.render(),this.collapse_in_sections(),this.close_sidebar_on_mobile(),this.highlight_active_section()},i.prototype.highlight_active_section=function(){var t;if(t=$(this.el).data("current-section"))return this.$(".sidebar-link."+t).addClass("is-active")},i.prototype.toggle_sidebar=function(){return this.is_sidebar_open()?this.close_sidebar():this.show_sidebar()},i.prototype.is_sidebar_open=function(){return $("body").hasClass("sidebar-open")},i.prototype.show_sidebar=function(){return $("body").removeClass("sidebar-closed").addClass("sidebar-open")},i.prototype.close_sidebar=function(){return $("body").removeClass("sidebar-open").addClass("sidebar-closed")},i.prototype.close_sidebar_on_mobile=function(){if(this.is_sidebar_open()&&$(window).width()<992)return this.close_sidebar()},i.prototype.collapse_in_sections=function(){return this.$('a[data-toggle="collapse"].is-active').each(function(){var t;return t=$(this).attr("href"),$(t).collapse("show")})},i}(Backbone.View)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Sites||(t.Sites={}),Locomotive.Views.Sites.NewView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i}(Locomotive.Views.Shared.FormView)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;(t=Locomotive.Views).Translations||(t.Translations={}),Locomotive.Views.Translations.IndexView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.el=".main",i}(Backbone.View)}.call(this);